{"ast":null,"code":"var _jsxFileName = \"E:\\\\code\\\\newREACT\\\\tugi-react\\\\tugibus\\\\src\\\\pages\\\\SignIn.js\",\n    _s = $RefreshSig$();\n\nimport { Card, Row, Col, Form, Button } from \"react-bootstrap\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport qs from 'qs';\nimport Apis, { endpoints } from \"../configs/Apis\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport cookies from \"react-cookies\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function SignIn() {\n  _s();\n\n  const [usernamein, setUsernamein] = useState();\n  const [passwordin, setPasswordin] = useState();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n\n  const login = async event => {\n    event.preventDefault();\n\n    try {\n      let userload = {\n        client_id: \"lWrqmTlPSvy9z5QYqGtaqyEW4kSYywLzOPW6cPBs\",\n        client_secret: \"0okLZjq23EMlH9o0BicaPsPqFl6Wpvyds9XuRs30JkWJ52psVbLctj2txueigIl0kFBVWL4CA8cDgl6abVkweaAJJvWG79EDb8r0AniZTX4bE9rnKMyZ2ExSo4SmX8tx\",\n        username: usernamein,\n        password: passwordin,\n        grant_type: \"password\"\n      }; // console.log(userload)\n\n      let res = await axios({\n        method: 'POST',\n        url: 'http://127.0.0.1:8000/o/token/',\n        headers: {\n          'content-type': 'application/x-www-form-urlencoded'\n        },\n        data: qs.stringify(userload)\n      }); // console.log(res.data)\n\n      cookies.save(\"access_token\", res.data.access_token);\n      let user = await Apis.get(endpoints['current-user'], {\n        headers: {\n          'Authorization': `Bearer ${cookies.load(\"access_token\")}`\n        }\n      });\n      console.log(user.data);\n      cookies.save(\"user\", user.data);\n      dispatch({\n        \"type\": \"USER_LOGIN\",\n        \"payload\": user.data\n      });\n      navigate(\"/\");\n    } catch (err) {\n      console.error(err);\n    }\n  }; // console.log(passwordin)\n  // console.log(usernamein)\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"justify-content-md-center\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"search-card\",\n        children: /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              textTransform: \"uppercase\",\n              fontWeight: \"bold\"\n            },\n            children: \"\\u0110\\u0103ng nh\\u1EADp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: login,\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              controlId: \"Email\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                placeholder: \"T\\xEAn \\u0111\\u0103ng nh\\u1EADp...\",\n                value: usernamein,\n                onChange: event => setUsernamein(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-3\",\n              controlId: \"formBasicPassword\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"M\\u1EADt kh\\u1EA9u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"password\",\n                placeholder: \"M\\u1EADt kh\\u1EA9u...\",\n                value: passwordin,\n                onChange: event => setPasswordin(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              style: {\n                marginBottom: \"1.5rem\"\n              },\n              children: [\"Ch\\u01B0a c\\xF3 t\\xE0i kho\\u1EA3n? \", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/sign-up\",\n                children: \"\\u0110\\u0103ng k\\xFD t\\u1EA1i \\u0111\\xE2y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 52\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid gap-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary btn-lg\",\n                style: {\n                  background: \"linear-gradient(90deg, rgb(119, 199, 253) 0%, rgb(26, 23, 23) 100%)\"\n                },\n                variant: \"secondary\",\n                size: \"lg\",\n                children: \"\\u0110\\u0103ng nh\\u1EADp\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(SignIn, \"9zxbIDYVzTe2/2RULHFWewnUmOs=\", false, function () {\n  return [useDispatch, useNavigate];\n});\n\n_c = SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["E:/code/newREACT/tugi-react/tugibus/src/pages/SignIn.js"],"names":["Card","Row","Col","Form","Button","React","useState","useEffect","Link","axios","qs","Apis","endpoints","useDispatch","useNavigate","cookies","SignIn","usernamein","setUsernamein","passwordin","setPasswordin","dispatch","navigate","login","event","preventDefault","userload","client_id","client_secret","username","password","grant_type","res","method","url","headers","data","stringify","save","access_token","user","get","load","console","log","err","error","textTransform","fontWeight","target","value","marginBottom","background"],"mappings":"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","sourcesContent":["import {Card, Row, Col, Form,Button} from \"react-bootstrap\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport qs from 'qs';\r\nimport Apis, { endpoints } from \"../configs/Apis\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport cookies from \"react-cookies\";\r\n\r\n\r\nexport default function SignIn(){\r\n\r\n    const [usernamein, setUsernamein]= useState()\r\n    const [passwordin, setPasswordin] = useState()\r\n    const dispatch = useDispatch()\r\n    const navigate = useNavigate();\r\n\r\n\r\n    const login = async (event) =>{\r\n        event.preventDefault()\r\n        \r\n        try{\r\n            let userload ={\r\n                client_id: \"lWrqmTlPSvy9z5QYqGtaqyEW4kSYywLzOPW6cPBs\",\r\n                client_secret: \"0okLZjq23EMlH9o0BicaPsPqFl6Wpvyds9XuRs30JkWJ52psVbLctj2txueigIl0kFBVWL4CA8cDgl6abVkweaAJJvWG79EDb8r0AniZTX4bE9rnKMyZ2ExSo4SmX8tx\",\r\n                username: usernamein,\r\n                password: passwordin,\r\n                grant_type: \"password\"\r\n            }\r\n            // console.log(userload)\r\n            let res = await axios({\r\n                method: 'POST',\r\n                url: 'http://127.0.0.1:8000/o/token/',\r\n                headers: { 'content-type': 'application/x-www-form-urlencoded' },\r\n                data: qs.stringify(userload)\r\n            })\r\n            \r\n            // console.log(res.data)\r\n            cookies.save(\"access_token\", res.data.access_token)\r\n            let user = await Apis.get(endpoints['current-user'],{\r\n                headers:{\r\n                    'Authorization': `Bearer ${cookies.load(\"access_token\")}`\r\n                }\r\n            })\r\n            console.log(user.data)\r\n            cookies.save(\"user\", user.data)\r\n\r\n            dispatch({\r\n                \"type\":\"USER_LOGIN\",\r\n                \"payload\": user.data\r\n            })\r\n            navigate(\"/\")\r\n        }catch(err){\r\n            console.error(err)\r\n        }\r\n    }\r\n    // console.log(passwordin)\r\n    // console.log(usernamein)\r\n\r\n    return(\r\n        <>\r\n            <div className=\"justify-content-md-center\">\r\n                <Card className=\"search-card\">\r\n                    <Card.Body>\r\n                        <h2 style={{textTransform:\"uppercase\", fontWeight:\"bold\"}}>Đăng nhập</h2>\r\n                        <Form onSubmit={login}>\r\n                            <Form.Group className=\"mb-3\" controlId=\"Email\">\r\n                                <Form.Label>Tên đăng nhập</Form.Label>\r\n                                <Form.Control \r\n                                type=\"text\" \r\n                                placeholder=\"Tên đăng nhập...\" \r\n                                value={usernamein}\r\n                                onChange={(event) => setUsernamein(event.target.value)}\r\n                                />\r\n                            </Form.Group>\r\n\r\n                            <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                                <Form.Label>Mật khẩu</Form.Label>\r\n                                <Form.Control \r\n                                type=\"password\" \r\n                                placeholder=\"Mật khẩu...\" \r\n                                value={passwordin}\r\n                                onChange={(event) => setPasswordin(event.target.value)}\r\n                                />                                \r\n                            </Form.Group>\r\n                            <Form.Group style={{marginBottom: \"1.5rem\"}}>\r\n                                Chưa có tài khoản? <Link to={\"/sign-up\"}>Đăng ký tại đây</Link>\r\n                            </Form.Group>\r\n                            <div className=\"d-grid gap-2\">\r\n                                <button \r\n                                className=\"btn btn-secondary btn-lg\" \r\n                                style={{background:\"linear-gradient(90deg, rgb(119, 199, 253) 0%, rgb(26, 23, 23) 100%)\"}} \r\n                                variant=\"secondary\" \r\n                                size=\"lg\"\r\n                                >\r\n                                    Đăng nhập\r\n                                </button>\r\n                            </div>\r\n                        </Form>\r\n                    </Card.Body>\r\n                </Card>\r\n            </div>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}